# 2. Ingestion

<pre>
â”œâ”€â”€ <a href="../README.md">..</a>
â”œâ”€â”€ <a href="./1.MEMORY.md">Memory</a>
â”œâ”€â”€ <span><a href="./2.INGESTION.md"><b>Ingestion</b></a> ðŸ‘ˆ</span>
â””â”€â”€ <a href="./3.RECALL.md">Recall</a>
</pre>

**Memory Ingestion** is the process of transforming raw conversational text into a structured object with metadata that will make similarity based retrieval possible.

```mermaid
---
title: Memory Ingestion
---

flowchart TB
  %% Start / End
  START(( ))
  END(( ))

  %% Core stages
  Ingest([Ingest])
  Score([Score])
  Drop([Drop])
  Classify([Classify])

  %% Memory types
  Episodic(["<a href='https://github.com/aacebo/merc/blob/main/docs/1.MEMORY.md#episodic-events'>Episodic</a>"])
  Semantic(["<a href='https://github.com/aacebo/merc/blob/main/docs/1.MEMORY.md#semantic-facts-concepts'>Semantic</a>"])
  Procedural(["<a href='https://github.com/aacebo/merc/blob/main/docs/1.MEMORY.md#procedural-skills-habits'>Procedural</a>"])
  Emotional(["<a href='https://github.com/aacebo/merc/blob/main/docs/1.MEMORY.md#emotional'>Emotional</a>"])
  Working(["<a href='https://github.com/aacebo/merc/blob/main/docs/1.MEMORY.md#working-temporary'>Working</a>"])

  %% Post-processing
  Store([Store])
  Recallable([Recallable])
  Recall([Recall])
  Use([Use])
  Reinforce([Reinforce])
  Reclassify([Reclassify])

  %% Flow
  START e1@--> Ingest
  e1@{ animate: true }

  Ingest e2@-->|salience + emotion + meaning + context| Score
  e2@{ animate: true }

  Score -->|below threshold| Drop
  Drop --> END

  Score e3@-->|above threshold| Classify
  e3@{ animate: true }

  Classify e4@--> Episodic
  Classify e5@--> Semantic
  e5@{ animate: true }

  Classify e6@--> Procedural
  Classify e7@--> Emotional
  Classify e8@--> Working

  Episodic e9@--> Store
  Semantic e10@--> Store
  e10@{ animate: true }

  Procedural e11@--> Store
  Emotional e12@--> Store
  Working e13@--> Store

  Store e14@--> Recallable
  e14@{ animate: true }

  Recallable e15@--> Recall
  e15@{ animate: true }

  Recall e16@--> Use
  e16@{ animate: true }

  Use e17@--> Reinforce
  e17@{ animate: true }

  Reinforce e18@--> Reclassify
  e18@{ animate: true }

  Reclassify e19@--> Store
  e19@{ animate: true }

  %% --- Global link style: dotted ---
  linkStyle default stroke-width:2px,stroke-dasharray:4 4;

  %% --- Styling for the "Classify" node + path ---
  classDef success color:#ffffff,stroke:#118a11,fill:#0e5904;
  class Classify success;

  %% --- Styling for the "Drop" node + path ---
  classDef error color:#ffffff,stroke:#cc0000,fill:#660000;
  class Drop error;
  class END error;

  %% Override the Drop path links back to red (0-based edge indices)
  linkStyle 2 stroke:#cc0000,stroke-width:2px;
  linkStyle 3 stroke:#cc0000,stroke-width:2px;
  linkStyle 4 stroke:#118a11,stroke-width:2px;
  linkStyle 6 stroke:#118a11,stroke-width:2px;
  linkStyle 11 stroke:#118a11,stroke-width:2px;
  linkStyle 15 stroke:#118a11,stroke-width:2px;
  linkStyle 16 stroke:#118a11,stroke-width:2px;
  linkStyle 17 stroke:#118a11,stroke-width:2px;
  linkStyle 18 stroke:#118a11,stroke-width:2px;
  linkStyle 19 stroke:#118a11,stroke-width:2px;
  linkStyle 20 stroke:#118a11,stroke-width:2px;
```

## 2.1 Score

By measuring the input using a classifier against our significant [datapoints](./1.MEMORY.md#datapoints), we can create a weighted score.

If said score is *under* our threshold, it is not worth remembering. Otherwise we continue on to further classification.

## 2.2 Classify

## 2.3 Store

## 2.4 Recall